# Папка `/pool/`

## Назначение

Каталог `/pool/` содержит реализации object pool и byte pool, включая базовые и NUMA-aware версии.

## Состав

### bytepool.go

Содержит реализацию byte-пула. Используется для управления буферами, полученными через `BytePool` интерфейс. Это обеспечивает замкнутую zero-copy модель, минимизирующую аллокации и нагрузки на GC.

- **SimpleBytePool** — пул на основе `chan []byte`
- Размер буфера и количество слотов задаются при инициализации.

### objpool.go

Генерик-пул объектов, обёрнутый над `sync.Pool`.

- **SyncPool[T any]** — универсальный обёртка над `sync.Pool`, принимающий параметризированный тип.
- Поддерживает `Get()` и `Put()`.

## Характеристики

- Пулы thread-safe, не требуют синхронизации на уровне вызывающих компонентов.
- В будущем возможно расширение NUMA-aware сегментами (пересекающимися с `lrita/numa`).
- Подходит как для буферизации сетевых пакетов, так и кэширования структур (`WebSocketFrame`, `WSParser`, `NetConnHandler` и др.)

## Особенности использования

- Buf-Get → payload.Read → обработка → payload.Release()
- Пулы работают с важным предположением: вызывающий обязан вернуть объект.

## Связь с архитектурой

- Используется в слоях `/transport/`, `/protocol/`, `/examples/`
- Через интерфейсы подключается к любой прикладной логике
- Главный инструмент zero-copy, выделений больших буферов и NUMA-sensitive алгоритмов

## Статус

Полностью рабочие реализация Simple/Sync pool. Далее предполагается создание специализированных реализаций (например, lock-free ring buffer pool per-core).
