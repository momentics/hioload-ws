# Папка `/fake/`

## Назначение

Каталог `/fake/` содержит имитационные (mock, fake, stub) реализации ключевых интерфейсов архитектуры. Использование этого слоя существенно упрощает тестирование любых компонент библиотеки на ранних этапах разработки, а также обеспечивает environment-для CI/CD пайплайнов.

## Содержимое

- **fakepool.go** — FakeBytePool: простейший byte pool, который всегда выдаёт новый буфер требуемого размера и игнорирует возвраты (`Put` — no-op).
- **fakereactor.go** — FakeReactor: имитация реактора, которая ничего не делает в методах `Run` и `Register`, кроме "выжидания" или возврата ok.

## Принципы работы

- Fake реализации не используют реальные системные ресурсы, не инициируют background-потоки, не аллоцируют ничего за пределами одной goroutine.
- Используются для модульного и интеграционного тестирования даже без сети.
- Можно подключать к любому компоненту, где требуется контракт `BytePool` или `Reactor`.

## Тестовые сценарии

- Проверка корректности обработки буферов, возврата памяти, освобождения ресурсов.
- Инъекция в юнит-тесты для контроля времени жизни объектов и гарантии отсутствия утечек памяти.
- Имитация любых крайних состояний (например, нехватка памяти, отказ в создании соединения).

## Практика применения

- Подключается автоматически в CI конвейерах для детерминированных тестов.
- Может быть использован для прототипирования бизнес-логики без реализации сетевого стека.

## Роль в архитектуре

- Гарантирует полную тестируемость всех интерфейсов `/api/` и компонентов `/reactor/`, `/pool/`, `/transport/`, `/protocol/`.
- Позволяет декомпозировать разработку: бизнес-логика может разрабатываться независимо от низкоуровневой реализации сетевых или memory-alloc операций.
