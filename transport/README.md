# Папка `/transport/`

## Назначение

Папка `/transport/` содержит сетевой транспортный слой. Он выполняет инкапсуляцию и расширение над стандартными интерфейсами `net.Conn`, добавляя:

- поддержку zero-copy буферов,
- интеграцию с object pool,
- контроль производительности при массовом обслуживании соединений,
- возможность замены backend-а (`net.Conn`, io_uring, raw socket).

## Структура

Файл **netconn.go** содержит реализацию базового адаптера `NetConn`, совместимого с `api.NetConn`.

### Структура `NetConn`

```

type NetConn struct {
conn net.Conn
pool pool.BytePool
}

```

- Работает с интерфейсом `BytePool`
- При `Read()` — буфер заполняется извне, следуя zero-copy подходу

## Методы

- `Read([]byte)`: Буфер предоставляется извне (out-of-band allocation)
- `Write([]byte)`: Отправка как есть — потоковая (без накопления)
- `Close()`: Закрытие соединения

## Назначение

NetConn является основным building-блоком транспортного слоя. Он обеспечивает абстракцию над сетевыми соединениями и служит совместимой точкой интеграции с другими компонентами (Reactor, WebSocketConn).

## Связь с остальной архитектурой

- Используется внутри `/protocol/` для реализации WebSocketConn
- Совместим с любым источником `net.Conn`
- Можно заменить на io_uring или DPDK сокет с сохранением интерфейса

## Тестируемость

Интерфейс `NetConn` покрывается тестами через `fake` реализацию. Протокол прямо зависит от NetConn, но не от низкоуровневой реализации.

