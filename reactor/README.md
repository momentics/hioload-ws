# Папка `/reactor/`

## Назначение

Каталог `/reactor/` содержит реализацию event loop (реактора), отвечающего за:

- обработку событий от сетевых соединений,
- передачу управления в бизнес-логику протокольного уровня,
- распределение соединений между CPU/NUMA узлами.

В данной реализации каркас выполнен с заглушкой (`FakeReactor`) для целей тестирования. Структура полностью совместима с будущей реализацией на базе `epoll`, `io_uring`, `kqueue`, `IOCP`.

## Структура

- **reactor.go** — основная структура и методы реактора.
- В будущем предполагается расширение на io_uring и NUMA-планировщик.

### Структура Reactor

```

type Reactor struct {
conns []api.NetConn
}

```

Хранит зарегистрированные соединения. Реальная реализация будет использовать более масштабируемую стратегию (например, map[int] => соединение), либо event-driven структуру внутри poller-а.

### Поддерживаемые методы:

```

func (r *Reactor) Run(ctx context.Context) error

```

Запускает event loop. В текущей реализации просто ожидает завершения контекста (заглушка).

```

func (r *Reactor) Register(conn api.NetConn) error

```

Зарегистрировать соединение в реактор. В продакшн-версии будет ассоциировать соединение с poller/pthread.

## Архитектурные цели

- Reactor поддерживает слабую связанность с NetConn (интерфейс внедряется).
- Реализация NUMA-aware реакторов с привязками к NUMA/CPU планируется в будущих итерациях.
- Дизайн совместим с передачей событий по каналам, очередям, либо через io_uring.

## Связь с остальными компонентами

- Использует интерфейс `api.NetConn` из `/api/`.
- Позволяет модулям вроде `/transport/` регистрировать свои подключения.

## Статус

- Реализация заглушки готова.
- Архитектурная совместимость с реальными backend-ами обеспечена.
- Требуется реализация `epoll/io_uring` loop для боевого применения.

